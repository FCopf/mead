<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Princípios de manipulação de data frames no R: importação, seleção de linhas e colunas e criação de variáveis.">

<title>(Básico da) Manipulação de data frames – Modelagem Estatística e Análise de Dados</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles/custom.css">
<meta property="og:title" content="(Básico da) Manipulação de data frames – Modelagem Estatística e Análise de Dados">
<meta property="og:description" content="Princípios de manipulação de data frames no R: importação, seleção de linhas e colunas e criação de variáveis.">
<meta property="og:image" content="https://github.com/FCopf/MEAD/content/introducao-r/images/data-frames-r.jpg">
<meta property="og:site_name" content="Modelagem Estatística e Análise de Dados">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/MEAD-logo-white-sigla.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Modelagem Estatística e Análise de Dados</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Procurar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/FCopf/MEAD"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">GitHub</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Nesta página</h2>
   
  <ul>
  <li><a href="#importando-arquivos-.csv" id="toc-importando-arquivos-.csv" class="nav-link active" data-scroll-target="#importando-arquivos-.csv"><span class="header-section-number">1</span> Importando arquivos <code>.csv</code></a></li>
  <li><a href="#manipulação-de-data-frames" id="toc-manipulação-de-data-frames" class="nav-link" data-scroll-target="#manipulação-de-data-frames"><span class="header-section-number">2</span> Manipulação de data frames</a>
  <ul class="collapse">
  <li><a href="#seleção-de-linhas-e-colunas-em-data-frames" id="toc-seleção-de-linhas-e-colunas-em-data-frames" class="nav-link" data-scroll-target="#seleção-de-linhas-e-colunas-em-data-frames"><span class="header-section-number">2.1</span> Seleção de linhas e colunas em data frames</a></li>
  <li><a href="#adicionando-novas-colunas" id="toc-adicionando-novas-colunas" class="nav-link" data-scroll-target="#adicionando-novas-colunas"><span class="header-section-number">2.2</span> Adicionando novas colunas</a></li>
  <li><a href="#família-apply-e-aggregate" id="toc-família-apply-e-aggregate" class="nav-link" data-scroll-target="#família-apply-e-aggregate"><span class="header-section-number">2.3</span> Família <code>apply</code> e <code>aggregate</code></a></li>
  <li><a href="#função-tapply" id="toc-função-tapply" class="nav-link" data-scroll-target="#função-tapply">Função <code>tapply</code></a></li>
  <li><a href="#função-apply" id="toc-função-apply" class="nav-link" data-scroll-target="#função-apply">Função <code>apply</code></a></li>
  <li><a href="#função-lapply" id="toc-função-lapply" class="nav-link" data-scroll-target="#função-lapply">Função <code>lapply</code></a></li>
  <li><a href="#função-aggregate" id="toc-função-aggregate" class="nav-link" data-scroll-target="#função-aggregate">Função <code>aggregate</code></a></li>
  </ul></li>
  <li><a href="#exportando-um-data-frame" id="toc-exportando-um-data-frame" class="nav-link" data-scroll-target="#exportando-um-data-frame"><span class="header-section-number">3</span> Exportando um data frame</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">(Básico da) Manipulação de data frames</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Programação</div>
    <div class="quarto-category">Manipulação de dados</div>
    <div class="quarto-category">Data frames</div>
  </div>
  </div>

<div>
  <div class="description">
    Princípios de manipulação de data frames no R: importação, seleção de linhas e colunas e criação de variáveis.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Embora seja possivel criar um data frame entrando com os dados diretamente via linha de comando, é mais eficiente importá-los a partir de arquivos texto (<code>.csv</code>, <code>.txt</code>).</p>
<section id="importando-arquivos-.csv" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="importando-arquivos-.csv"><span class="header-section-number">1</span> Importando arquivos <code>.csv</code></h2>
<p>Um arquivo do tipo <code>.csv</code> pode ser lido com a função <code>read.csv</code>. Faça o download do conjunto de dados <code>dbenv.csv</code> disponível no repositório <a href="https://github.com/FCopf/datasets">datasets</a> e salve-o em sua pasta de trabalho (ex. <code>"C:/seu_caminho/Introducao_R")</code>. Ao abrir o arquivo em algum editor de texto verá que ele é composto por <span class="math inline">\(30\)</span> <em>linhas</em> por <span class="math inline">\(11\)</span> <em>colunas</em>.</p>
<p>Após fazer o download, você pode importar o conjunto de dados utilizando o comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>dbenv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"C:/seu_caminho/Introducao_R/dbenv.csv"</span>, </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">dec =</span> <span class="st">'.'</span>, <span class="at">sep =</span> <span class="st">','</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A função <code>read.csv</code> possui diferentes argumentos. A argumento <code>header</code> define se a primeira linha consiste do cabeçalho (<code>TRUE</code>) ou não (<code>FALSE</code>). O argumento <code>dec</code> define se o separador decimal consiste de <em>vírgula</em> ou <em>ponto</em> e o argumento <code>sep</code> informa sobre qual é o caracter separador de colunas utilizado no arquivo. No arquivo em questão as colunas são separadas por <em>vírgulas</em>. Outros tipos de separadores comuns são <em>ponto-e-vírgula</em> ou <em>tabulações</em>.</p>
<p>Confira os nomes das <span class="math inline">\(11\)</span> variáveis (cabeçalho), a dimensão da tabela (número de linhas e colunas) e sua estrutura (um <code>data.frame</code> formado por <span class="math inline">\(11\)</span> vetores numéricos).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dbenv</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    dfs alt   slo  flo pH har pho nit amm oxy bdo
1     3 934 6.176   84 79  45   1  20   0 122  27
2    22 932 3.434  100 80  40   2  20  10 103  19
3   102 914 3.638  180 83  52   5  22   5 105  35
4   185 854 3.497  253 80  72  10  21   0 110  13
5   215 849 3.178  264 81  84  38  52  20  80  62
6   324 846 3.497  286 79  60  20  15   0 102  53
7   268 841 4.205  400 81  88   7  15   0 111  22
8   491 792 3.258  130 81  94  20  41  12  70  81
9   705 752 2.565  480 80  90  30  82  12  72  52
10  990 617 4.605 1000 77  82   6  75   1 100  43
11 1234 483 3.738 1990 81  96  30 160   0 115  27
12 1324 477 2.833 2000 79  86   4  50   0 122  30
13 1436 450 3.091 2110 81  98   6  52   0 124  24
14 1522 434 2.565 2120 83  98  27 123   0 123  38
15 1645 415 1.792 2300 86  86  40 100   0 117  21
16 1859 375 3.045 1610 80  88  20 200   5 103  27
17 1985 348 1.792 2430 80  92  20 250  20 102  46
18 2110 332 2.197 2500 80  90  50 220  20 103  28
19 2246 310 1.792 2590 81  84  60 220  15 106  33
20 2477 286 2.197 2680 80  86  30 300  30 103  28
21 2812 262 2.398 2720 79  85  20 220  10  90  41
22 2940 254 2.708 2790 81  88  20 162   7  91  48
23 3043 246 2.565 2880 81  97 260 350 115  63 164
24 3147 241 1.386 2976 80  99 140 250  60  52 123
25 3278 231 1.792 3870 79 100 422 620 180  41 167
26 3579 214 1.792 3910 79  94 143 300  30  62  89
27 3732 206 2.565 3960 81  90  58 300  26  72  63
28 3947 195 1.386 4320 83 100  74 400  30  81  45
29 4220 183 1.946 6770 78 110  45 162  10  90  42
30 4530 172 1.099 6900 82 109  65 160  10  82  44</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dbenv)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "dfs" "alt" "slo" "flo" "pH"  "har" "pho" "nit" "amm" "oxy" "bdo"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dbenv)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 11</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Acessando <code>.csv</code> em uma <em>url</em>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Como este arquivo está em um repositório na nuvem, poderia ser lido acessando diretamente sua <em>url</em>, sem a necessidade de fazer o download:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dbenv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/FCopf/datasets/refs/heads/main/dbenv.csv"</span>, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">dec =</span> <span class="st">'.'</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sep =</span> <span class="st">','</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Iniciando uma seção de trabalho
</div>
</div>
<div class="callout-body-container callout-body">
<p>Uma seção no R, se refere ao ambiente em que ficam armazenados os objetos (vetores, matrizes, data frames, etc.) criados durante o processo de manipulação e análise de dados. Ao fechar uma seção do R (ex. ao sair do RStudio), esta pode ser salva guardando os objetos criados. O arquivo de uma seção é salvo com extensão <code>.RData</code>.</p>
<p>Ao abrir um novo script (com extensão <code>.r</code>) em um editor de texto é importante definir o diretório de trabalho, que será o local onde ficarão dados e onde serão salvos os resultados do trabalho (ex. figuras, tabelas, etc.). No RStudio, um novo <em>script</em> pode ser aberto via menu <code>Arquivo --&gt; Novo script</code>. Ao iniciar o R-Studio abre-se uma nova seção. O diretório desta seção pode ser verificado pelo comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para criar uma pasta (ex. <code>Introducao_R</code>) e direcionar a seção de trabalho para esta pasta utiliza-se a função <code>setwd()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/seu_caminho/Introducao_R"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A função <code>getwd()</code> pode ser utilizada para verificar se a alteração de diretório foi realizada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>C:/seu_caminho/Introducao_R</code></pre>
</div>
</div>
<p>A partir deste momento o R irá ler e salvar aquivos sempre a partir desse diretório.</p>
</div>
</div>
</section>
<section id="manipulação-de-data-frames" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="manipulação-de-data-frames"><span class="header-section-number">2</span> Manipulação de data frames</h2>
<section id="seleção-de-linhas-e-colunas-em-data-frames" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="seleção-de-linhas-e-colunas-em-data-frames"><span class="header-section-number">2.1</span> Seleção de linhas e colunas em data frames</h3>
<p>No data frame os nomes das colunas e linhas podem ser acessados por:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dbenv)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "dfs" "alt" "slo" "flo" "pH"  "har" "pho" "nit" "amm" "oxy" "bdo"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dbenv)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15"
[16] "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "26" "27" "28" "29" "30"</code></pre>
</div>
</div>
<p>Os números <em>“entre aspas”</em> significam que estão sendo lidos como caracteres.</p>
<p>Colunas específicas podem ser acessadas por meio de seus nomes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>colunas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dfs"</span>, <span class="st">"flo"</span>, <span class="st">"oxy"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>dbenv[,colunas]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    dfs  flo oxy
1     3   84 122
2    22  100 103
3   102  180 105
4   185  253 110
5   215  264  80
6   324  286 102
7   268  400 111
8   491  130  70
9   705  480  72
10  990 1000 100
11 1234 1990 115
12 1324 2000 122
13 1436 2110 124
14 1522 2120 123
15 1645 2300 117
16 1859 1610 103
17 1985 2430 102
18 2110 2500 103
19 2246 2590 106
20 2477 2680 103
21 2812 2720  90
22 2940 2790  91
23 3043 2880  63
24 3147 2976  52
25 3278 3870  41
26 3579 3910  62
27 3732 3960  72
28 3947 4320  81
29 4220 6770  90
30 4530 6900  82</code></pre>
</div>
</div>
<p>Ou por suas posições:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>colunas_num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>dbenv[,colunas_num]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    dfs   slo  flo
1     3 6.176   84
2    22 3.434  100
3   102 3.638  180
4   185 3.497  253
5   215 3.178  264
6   324 3.497  286
7   268 4.205  400
8   491 3.258  130
9   705 2.565  480
10  990 4.605 1000
11 1234 3.738 1990
12 1324 2.833 2000
13 1436 3.091 2110
14 1522 2.565 2120
15 1645 1.792 2300
16 1859 3.045 1610
17 1985 1.792 2430
18 2110 2.197 2500
19 2246 1.792 2590
20 2477 2.197 2680
21 2812 2.398 2720
22 2940 2.708 2790
23 3043 2.565 2880
24 3147 1.386 2976
25 3278 1.792 3870
26 3579 1.792 3910
27 3732 2.565 3960
28 3947 1.386 4320
29 4220 1.946 6770
30 4530 1.099 6900</code></pre>
</div>
</div>
<p>O mesmo é válido para as linhas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>linhas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"3"</span>, <span class="st">"7"</span>, <span class="st">"9"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>dbenv[linhas,]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dfs alt   slo flo pH har pho nit amm oxy bdo
3 102 914 3.638 180 83  52   5  22   5 105  35
7 268 841 4.205 400 81  88   7  15   0 111  22
9 705 752 2.565 480 80  90  30  82  12  72  52</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>linhas_num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>dbenv[linhas_num,]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dfs alt   slo flo pH har pho nit amm oxy bdo
3 102 914 3.638 180 83  52   5  22   5 105  35
7 268 841 4.205 400 81  88   7  15   0 111  22
9 705 752 2.565 480 80  90  30  82  12  72  52</code></pre>
</div>
</div>
<p>Sub-conjunto do data frame podem ser selecionados combinando esses procedimentos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dbenv[linhas,colunas]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dfs flo oxy
3 102 180 105
7 268 400 111
9 705 480  72</code></pre>
</div>
</div>
</section>
<section id="adicionando-novas-colunas" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="adicionando-novas-colunas"><span class="header-section-number">2.2</span> Adicionando novas colunas</h3>
<p>Este conjunto de dados mostra medidas físicas e químicas obtidas em um riacho amostrado desde a cabeceira até a foz. O ponto mais alto (934 m de altitude) está a 3 km da cabeceira enquanto o ponto mais baixo está a 172 m de altitude e a 4530 km da cabeceira. Vamos criar uma nova variável categorizando os trechos do rio em <code>Alto</code>, <code>Medio</code> e <code>Baixo</code> assumindo a seguinte relação:</p>
<ul>
<li><span class="math inline">\(0\)</span> a <span class="math inline">\(300\)</span> m: <code>Baixo</code>;</li>
<li><span class="math inline">\(300\)</span> a <span class="math inline">\(600\)</span> m: <code>Médio</code>;</li>
<li>Acima de <span class="math inline">\(600\)</span> m: <code>Alto</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>elv_cat <span class="ot">&lt;-</span> <span class="fu">cut</span>(dbenv<span class="sc">$</span>alt, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">300</span>, <span class="dv">600</span>, <span class="dv">1000</span>), </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Baixo"</span>, <span class="st">"Medio"</span>, <span class="st">"Alto"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A inserção do novo objeto <code>elv_cat</code> no data frame pode ser feito simplesmente por:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>dbenv<span class="sc">$</span>trecho <span class="ot">&lt;-</span> elv_cat</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A nova coluna denominada <code>trecho</code> foi inserida no data frame, como pode ser visto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dbenv)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dfs alt   slo flo pH har pho nit amm oxy bdo trecho
1   3 934 6.176  84 79  45   1  20   0 122  27   Alto
2  22 932 3.434 100 80  40   2  20  10 103  19   Alto
3 102 914 3.638 180 83  52   5  22   5 105  35   Alto
4 185 854 3.497 253 80  72  10  21   0 110  13   Alto
5 215 849 3.178 264 81  84  38  52  20  80  62   Alto
6 324 846 3.497 286 79  60  20  15   0 102  53   Alto</code></pre>
</div>
</div>
<p>O mesmo pode ser realizado com a função <code>transform()</code>. Vamos utilizá-la para criar uma nova variável categórica a partir do oxigênio dissolvido, considerando 3 níveis de satuação: <code>Pobre</code> (<span class="math inline">\(0\)</span> a <span class="math inline">\(5\)</span>), <code>Médio</code> (<span class="math inline">\(5\)</span> a <span class="math inline">\(8\)</span>) e <code>Saturado</code> (acima de <span class="math inline">\(8\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>dbenv <span class="ot">&lt;-</span> <span class="fu">transform</span>(dbenv,  </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a> <span class="at">saturacao =</span> <span class="fu">cut</span>(dbenv<span class="sc">$</span>oxy, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">109</span>, <span class="dv">124</span>), </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pobre"</span>, <span class="st">"Medio"</span>, <span class="st">"Saturado"</span>)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veja agora o data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dbenv</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    dfs alt   slo  flo pH har pho nit amm oxy bdo trecho saturacao
1     3 934 6.176   84 79  45   1  20   0 122  27   Alto  Saturado
2    22 932 3.434  100 80  40   2  20  10 103  19   Alto     Medio
3   102 914 3.638  180 83  52   5  22   5 105  35   Alto     Medio
4   185 854 3.497  253 80  72  10  21   0 110  13   Alto  Saturado
5   215 849 3.178  264 81  84  38  52  20  80  62   Alto     Medio
6   324 846 3.497  286 79  60  20  15   0 102  53   Alto     Medio
7   268 841 4.205  400 81  88   7  15   0 111  22   Alto  Saturado
8   491 792 3.258  130 81  94  20  41  12  70  81   Alto     Medio
9   705 752 2.565  480 80  90  30  82  12  72  52   Alto     Medio
10  990 617 4.605 1000 77  82   6  75   1 100  43   Alto     Medio
11 1234 483 3.738 1990 81  96  30 160   0 115  27  Medio  Saturado
12 1324 477 2.833 2000 79  86   4  50   0 122  30  Medio  Saturado
13 1436 450 3.091 2110 81  98   6  52   0 124  24  Medio  Saturado
14 1522 434 2.565 2120 83  98  27 123   0 123  38  Medio  Saturado
15 1645 415 1.792 2300 86  86  40 100   0 117  21  Medio  Saturado
16 1859 375 3.045 1610 80  88  20 200   5 103  27  Medio     Medio
17 1985 348 1.792 2430 80  92  20 250  20 102  46  Medio     Medio
18 2110 332 2.197 2500 80  90  50 220  20 103  28  Medio     Medio
19 2246 310 1.792 2590 81  84  60 220  15 106  33  Medio     Medio
20 2477 286 2.197 2680 80  86  30 300  30 103  28  Baixo     Medio
21 2812 262 2.398 2720 79  85  20 220  10  90  41  Baixo     Medio
22 2940 254 2.708 2790 81  88  20 162   7  91  48  Baixo     Medio
23 3043 246 2.565 2880 81  97 260 350 115  63 164  Baixo     Medio
24 3147 241 1.386 2976 80  99 140 250  60  52 123  Baixo     Medio
25 3278 231 1.792 3870 79 100 422 620 180  41 167  Baixo     Medio
26 3579 214 1.792 3910 79  94 143 300  30  62  89  Baixo     Medio
27 3732 206 2.565 3960 81  90  58 300  26  72  63  Baixo     Medio
28 3947 195 1.386 4320 83 100  74 400  30  81  45  Baixo     Medio
29 4220 183 1.946 6770 78 110  45 162  10  90  42  Baixo     Medio
30 4530 172 1.099 6900 82 109  65 160  10  82  44  Baixo     Medio</code></pre>
</div>
</div>
</section>
<section id="família-apply-e-aggregate" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="família-apply-e-aggregate"><span class="header-section-number">2.3</span> Família <code>apply</code> e <code>aggregate</code></h3>
<p>Em muitas situações temos interesse aplicar uma determinada função a cada linha ou a cada coluna de um data frame ou ainda para grupos distintos de linhas.</p>
<p>Observe por exemplo que se extraímos a média aritmética da coluna <code>pH</code> (<span class="math inline">\(\times 10\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dbenv<span class="sc">$</span>pH)  <span class="co"># média aritmética</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 80.5</code></pre>
</div>
</div>
<p>O resultado é calculado para toda a coluna.</p>
</section>
<section id="função-tapply" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="função-tapply">Função <code>tapply</code></h3>
<p>Podemos estar interessados no entanto, em extrair as médias separadamente para os trechos alto, médio e baixo do rio. A função <code>tapply()</code> é útil nestas situações.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(dbenv<span class="sc">$</span>pH, dbenv<span class="sc">$</span>trecho, mean)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Baixo    Medio     Alto 
80.27273 81.22222 80.10000 </code></pre>
</div>
</div>
<p>A função acima, pode ser <em>lida</em> do modo:</p>
<ul>
<li>Selecione a coluna <code>pH</code>;</li>
<li>Agrupe os elementos em função dos níveis em <code>trecho</code> (Baixo, Medio, Alto);</li>
<li>Calcule a média aritmética para cada sub-grupo.</li>
</ul>
<p>Note que o resultado foi um vetor em que cada elemento corresponde à média de um sub-grupo. Funções que retornam mais de um valor resultam em um objeto no formato de <code>lista</code>. A função <code>range()</code> por exemplo, retorna dois valores (mínimo e máximo). Ao utilizá-la junto à função <code>tapply()</code> termos como resultado uma lista composta por um vetor para cada subgrupo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(dbenv<span class="sc">$</span>pH, dbenv<span class="sc">$</span>trecho, range)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Baixo
[1] 78 83

$Medio
[1] 79 86

$Alto
[1] 77 83</code></pre>
</div>
</div>
</section>
<section id="função-apply" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="função-apply">Função <code>apply</code></h3>
<p>Podemos aplicar uma determinada função a todas as linhas ou colunas de um data frame (ou matriz).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(dbenv[,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">MARGIN =</span> <span class="dv">2</span>, mean)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        dfs         alt         slo         flo          pH 
1879.033333  481.500000    2.757733 2220.100000   80.500000 </code></pre>
</div>
</div>
<p>O argumento <code>MARGIN = 2</code> diz que desejamos aplicar a função ás colunas da matriz. Com <code>MARGIN = 1</code> aplicamos a função às linhas da matriz.</p>
</section>
<section id="função-lapply" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="função-lapply">Função <code>lapply</code></h3>
<p>Se o objeto é do formato <code>lista</code>, o comando <code>lapply()</code> aplica uma função a cada elemento da lista. Considere a lista:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>nossalista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Ilha =</span> <span class="fu">c</span>(<span class="st">"Ilhabela"</span>, <span class="st">"Anchieta"</span>, <span class="st">"Cardoso"</span>), </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Areaskm2 =</span> <span class="fu">c</span>(<span class="fl">347.5</span>, <span class="fl">8.3</span>, <span class="dv">131</span>), </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Bioma =</span> <span class="fu">rep</span>(<span class="st">"Mata Atlantica"</span>,<span class="dv">3</span>),</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Lat =</span> <span class="fu">c</span>(<span class="dv">23</span>, <span class="dv">25</span>, <span class="dv">23</span>),</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Long =</span> <span class="fu">c</span>(<span class="dv">45</span>, <span class="dv">47</span>, <span class="dv">45</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veja os resultados dos comandos abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(nossalista, sort)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Ilha
[1] "Anchieta" "Cardoso"  "Ilhabela"

$Areaskm2
[1]   8.3 131.0 347.5

$Bioma
[1] "Mata Atlantica" "Mata Atlantica" "Mata Atlantica"

$Lat
[1] 23 23 25

$Long
[1] 45 45 47</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Existem outras funções neste grupo, Veja o <code>help()</code> destas funções pois são extremamente úteis na manipulação de data frames e listas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>?tapply</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>?apply</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>?lapply</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>?mapply</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>?replicate</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="função-aggregate" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="função-aggregate">Função <code>aggregate</code></h3>
<p>A função <code>tapply()</code> aplica uma função a subgrupos de uma <strong>única</strong> coluna. A função <code>aggregate()</code> faz o mesmo, porém para <strong>múltiplas</strong> colunas agrupadas de acordo com uma ou mais categorias. O comando abaixo calcula os valores médios das variáveis para os trechos alto, médio e baixo combinados com níveis de <span class="math inline">\(pH\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>media.trecho <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(dbenv[, <span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>], </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">by =</span> <span class="fu">list</span>(<span class="at">TRECHO =</span> dbenv<span class="sc">$</span>trecho,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">ALCALINO =</span> dbenv<span class="sc">$</span>pH <span class="sc">&gt;=</span> <span class="dv">80</span>),</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">FUN =</span> mean)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>media.trecho</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  TRECHO ALCALINO      dfs      alt      slo       flo       pH      har
1  Baixo    FALSE 3472.250 222.5000 1.982000 4317.5000 78.75000 97.25000
2  Medio    FALSE 1324.000 477.0000 2.833000 2000.0000 79.00000 86.00000
3   Alto    FALSE  439.000 799.0000 4.759333  456.6667 78.33333 62.33333
4  Baixo     TRUE 3402.286 228.5714 1.986571 3786.5714 81.14286 95.57143
5  Medio     TRUE 1754.625 393.3750 2.501500 2206.2500 81.50000 91.50000
6   Alto     TRUE  284.000 847.7143 3.396429  258.1429 80.85714 74.28571
        pho       nit        amm       oxy      bdo
1 157.50000 325.50000 57.5000000  70.75000 84.75000
2   4.00000  50.00000  0.0000000 122.00000 30.00000
3   9.00000  36.66667  0.3333333 108.00000 41.00000
4  92.42857 274.57143 39.7142857  77.71429 73.57143
5  31.62500 165.62500  7.5000000 111.62500 30.50000
6  16.00000  36.14286  8.4285714  93.00000 40.57143</code></pre>
</div>
</div>
</section>
</section>
<section id="exportando-um-data-frame" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="exportando-um-data-frame"><span class="header-section-number">3</span> Exportando um data frame</h2>
<p>Finalmente, podemos exportar o data frame <code>media.trecho</code> obtido acima para um arquivo <code>Mediaportecho.csv</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(media.trecho, <span class="at">file =</span> <span class="st">"C:/seu_caminho/Introducao_R/Mediaportecho.csv"</span>, </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">","</span>, <span class="at">dec =</span> <span class="st">'.'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">col.names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/github\.com\/FCopf\/MEAD");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>